version: "3.9"
services:
  app:
    container_name: symfony_app_service
    build:
      context: ./infra
      target: symfony_php
      args:
        SYMFONY_VERSION: ${SYMFONY_VERSION:-}
        STABILITY: ${STABILITY:-stable}
    volumes:
      # Comment out the next line in production
      - ./:/srv/app:rw,cached
      # If you develop on Linux, comment out the following volumes to just use bind-mounted project directory from host
      #- /srv/app/var/
      #- /srv/app/var/cache/
      #- /srv/app/var/logs/
      #- /srv/app/var/sessions/
    environment:
      - SYMFONY_VERSION

  # nginx:
  #   container_name: symfony_nginx_service
  #   build:
  #     context: ./infra
  #     target: symfony_nginx
  #   depends_on:
  #     - app
  #   volumes:
  #     # Comment out the next line in production
  #     - ./infra/docker/nginx/templates:/etc/nginx/templates
  #     - ./api/public:/srv/app/public:ro
  #   ports:
  #     - "8080:80"
  #   environment:
  #     - NGINX_PORT=80

  # swagger-ui:
  #   image: swaggerapi/swagger-ui
  #   container_name: "swagger-ui"
  #   ports:
  #     - "8082:8080"
  #   volumes:
  #     - ./swagger/openapi.json:/openapi.json
  #   environment:
  #     SWAGGER_JSON: /openapi.json
  #     # API_URL: ""
